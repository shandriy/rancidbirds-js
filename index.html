<!DOCTYPE html><html><head><script>"use strict";let frame={start:performance.now(),delta:0},cube=[["#000000",{x:-10,y:-10,z:20},{x:10,y:-10,z:20},{x:10,y:10,z:20},{x:-10,y:10,z:20}],["#ff0000",{x:10,y:-10,z:10},{x:10,y:10,z:10},{x:10,y:10,z:20},{x:10,y:-10,z:20}],["#00ff00",{x:-10,y:-10,z:10},{x:-10,y:10,z:10},{x:-10,y:10,z:20},{x:-10,y:-10,z:20}],["#0000ff",{x:-10,y:10,z:10},{x:10,y:10,z:10},{x:10,y:10,z:20},{x:-10,y:10,z:20}],["#ffff00",{x:-10,y:-10,z:10},{x:10,y:-10,z:10},{x:10,y:-10,z:20},{x:-10,y:-10,z:20}],["#ff00ff",{x:-10,y:-10,z:10},{x:10,y:-10,z:10},{x:10,y:10,z:10},{x:-10,y:10,z:10}]];function setLangPrefs(){switch(window.navigator.language.substring(0,2).toUpperCase()){case"EN":default:break;case"RU":document.getElementsByTagName("title")[0].innerHTML="ПРОГОРКЛЫЕ-ПТИЦЫ"}}let camera={x:0,y:0,z:-20,yaw:0,pitch:0,roll:0,fov:90,screenDistance:window.innerWidth/2,renderDistance:300},object=[["#ffaa00",{x:-10,y:-10,z:10},{x:10,y:-10,z:10},{x:10,y:10,z:10},{x:-10,y:10,z:10}]];function refreshFVSD(){camera.screenDistance=Math.round(1/(Math.tan(camera.fov/114.5915)/(window.innerWidth/2)))}function run(e){frame.delta=performance.now()-frame.start,frame.start+=frame.delta,e.call(),window.requestAnimationFrame(run.bind(null,e))}function frameR(e){processInput(),draw(e,scenify(e,camera,[{model:cube,transform:{x:0,y:0,z:0,yaw:0,pitch:0,roll:0}}]))}window.addEventListener("resize",(function(){let e=document.getElementById("canvas");e.height=window.innerHeight,e.width=window.innerWidth,refreshFVSD()})),window.onload=function(){setLangPrefs(),document.body.innerHTML="<canvas id='canvas'></canvas>",document.getElementsByTagName("style")[0].innerHTML="html,body,canvas{overflow:hidden;margin:0;padding:0;image-rendering:pixelated;image-rendering:crisp-edges}";let e=document.getElementById("canvas");e.height=window.innerHeight,e.width=window.innerWidth;let n=e.getContext("2d",{alpha:!1});run(frameR.bind(null,n))},document.addEventListener("keydown",keyPressed,!1),document.addEventListener("keyup",keyReleased,!1);let keyArray=[],acceptedKeys=["w","a","s","d"," "];function keyPressed(e){let n=e.key.toString().toLowerCase();!keyArray.includes(n)&&acceptedKeys.includes(n)&&keyArray.push(n)}function keyReleased(e){let n=e.key.toString().toLowerCase();keyArray.includes(n)&&keyArray.splice(keyArray.indexOf(n),1)}function keyDown(e){return keyArray.includes(e)}function processInput(){keyDown("w")&&(camera.z+=frame.delta/30),keyDown("a")&&(camera.x-=frame.delta/30),keyDown("s")&&(camera.z-=frame.delta/30),keyDown("d")&&(camera.x+=frame.delta/30)}function scenify(e,n,t){let a,r,i,o,c,l,s,d,f,y,h,u,m,w,g,x,z=[];const p=e.canvas.width/2,k=e.canvas.height/2;for(let e=0;e<t.length;e++){y=t[e].transform,o=y.x,c=y.y,l=y.z,y=t[e].model;for(let e=0;e<y.length;e++){h=[y[e][0]],u=y[e].length-1,m=u;for(let t=1;t<y[e].length;t++)d=y[e][t],a=d.x+o-n.x,r=d.y+c-n.y,i=d.z+l-n.z,s=a*a+r*r+i*i,Math.pow(n.renderDistance,2)<=s&&u--,i=n.screenDistance/i,a*=i,r*=i,Math.abs(a)>p+2&&Math.abs(r)>k+2&&m--,i<=0&&(r*=-1,a*=-1),h.push([Math.floor(p+a),Math.floor(k-r),s]);for(let n=1;n<y[e].length;n++){w=h[n],f=0;for(let n=1;n<y[e].length;n++)h[n][0]==w[0]&&h[n][1]==w[1]&&f++;if(1!=f){u=-1,m=-1;break}}g=0,x=0;for(let e=1;e<h.length;e++)g+=h[e][2],x++;h[1][2]=g/x,u>0&&m>0&&z.push(h)}}return z=z.sort((function(e,n){return n[1][2]-e[1][2]})),z}function draw(e,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.beginPath(),e.fillStyle="#ffffff",e.rect(0,0,e.canvas.width,e.canvas.height),e.fill(),polyBatch(e,n)}function polyBatch(e,n){for(let t=0;t<n.length;t++)if(n[t].length>=4){e.beginPath(),e.moveTo(n[t][1][0],n[t][1][1]);for(let a=2;a<n[t].length;a++)e.lineTo(n[t][a][0],n[t][a][1]);e.fillStyle=n[t][0],e.fill()}}</script><title>RANCID BIRDS</title><style></style></head><body><noscript><p>Enable JavaScript</p></noscript><p>Loading...</p></body></html>
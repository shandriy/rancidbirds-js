<!DOCTYPE html><html><head><script>"use strict";let frame={start:performance.now(),delta:0},camera={x:0,y:0,z:-20,yaw:0,pitch:0,roll:0,fov:90,screenDistance:window.innerWidth/2,renderDistance:1e3},object=[["#ffaa00",{x:-10,y:-10,z:10},{x:10,y:-10,z:10},{x:10,y:10,z:10},{x:-10,y:10,z:10}]],cube=[["#ffaa00",{x:-10,y:-10,z:20},{x:10,y:-10,z:20},{x:10,y:10,z:20},{x:-10,y:10,z:20}],["#88aabb",{x:10,y:-10,z:10},{x:10,y:10,z:10},{x:10,y:10,z:20},{x:10,y:-10,z:20}],["#44aaee",{x:-10,y:-10,z:10},{x:-10,y:10,z:10},{x:-10,y:10,z:20},{x:-10,y:-10,z:20}],["#eeaa44",{x:-10,y:10,z:10},{x:10,y:10,z:10},{x:10,y:10,z:20},{x:-10,y:10,z:20}],["#bbaa88",{x:-10,y:-10,z:10},{x:10,y:-10,z:10},{x:10,y:-10,z:20},{x:-10,y:-10,z:20}],["#00aaff",{x:-10,y:-10,z:10},{x:10,y:-10,z:10},{x:10,y:10,z:10},{x:-10,y:10,z:10}]];function refreshFVSD(){camera.screenDistance=Math.round(1/(Math.tan(camera.fov/114.5915)/(window.innerWidth/2)))}function run(e){frame.delta=performance.now()-frame.start,frame.start+=frame.delta,e.call(),window.requestAnimationFrame(run.bind(null,e))}function frameR(e){draw(e,scenify(e,camera,[{model:cube,transform:{x:0,y:0,z:0,yaw:0,pitch:0,roll:0}}]))}function draw(e,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),polyBatch(e,n),camera.y+=frame.delta/120}function scenify(e,n,t){let a,r,i,o,l,c,d,f,h,y,s,x,z,m,w,g,u=[];const b=e.canvas.width/2,v=e.canvas.height/2;for(let e=0;e<t.length;e++){y=t[e].transform,o=y.x,l=y.y,c=y.z,y=t[e].model;for(let e=0;e<y.length;e++){s=[y[e][0]],x=y[e].length-1,z=x;for(let t=1;t<y[e].length;t++)f=y[e][t],a=f.x+o-n.x,r=f.y+l-n.y,i=f.z+c-n.z,d=a*a+r*r+i*i,Math.pow(n.renderDistance,2)<=d&&x--,i=n.screenDistance/i,a*=i,r*=i,(Math.abs(a)>b+2||Math.abs(r)>v+2)&&z--,i<=0&&(r*=-1,a*=-1),s.push([Math.floor(b+a),Math.floor(v-r),d]);for(let n=1;n<y[e].length;n++){m=s[n],h=0;for(let n=1;n<y[e].length;n++)s[n][0]==m[0]&&s[n][1]==m[1]&&h++;if(1!=h){x=-1,z=-1;break}}w=0,g=0;for(let e=1;e<s.length;e++)w+=s[e][2],g++;s[1][2]=w/g,x>0&&z>0&&u.push(s)}}return u=u.sort((function(e,n){return n[1][2]-e[1][2]})),u}function polyBatch(e,n){for(let t=0;t<n.length;t++)if(n[t].length>=4){e.beginPath(),e.moveTo(n[t][1][0],n[t][1][1]);for(let a=2;a<n[t].length;a++)e.lineTo(n[t][a][0],n[t][a][1]);e.fillStyle=n[t][0],e.fill()}}window.addEventListener("resize",(function(){let e=document.getElementById("canvas");e.height=window.innerHeight,e.width=window.innerWidth,refreshFVSD()})),window.onload=function(){document.body.innerHTML="<canvas id='canvas'></canvas>",document.getElementById("s").innerHTML="html,body,canvas{overflow:hidden;margin:0;padding:0;image-rendering:pixelated;image-rendering:crisp-edges}";let e=document.getElementById("canvas");e.height=window.innerHeight,e.width=window.innerWidth;let n=e.getContext("2d",{alpha:!1});run(frameR.bind(null,n))};</script><title>test</title><style id="s"></style></head><body><noscript>Enable JS</noscript>Loading...</body></html>